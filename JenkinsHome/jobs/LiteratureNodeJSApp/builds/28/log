Started by user [8mha:////4LUpBPEMWyDWtdtHvvWHlbpAlRv6IgzcrMHryjVwgjhUAAAAoR+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAyeEgZR/dLi1CL94IzEotSA/My8Ev/i5MQiAEhiGyXKAAAA[0mOscar Medina
Building in workspace /var/jenkins_home/workspace/LiteratureNodeJSApp
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/SharePointOscar/ZSPharmaLiteratureApp.git # timeout=10
Fetching upstream changes from https://github.com/SharePointOscar/ZSPharmaLiteratureApp.git
 > git --version # timeout=10
using GIT_ASKPASS to set credentials Docker Hub Credentials
 > git fetch --tags --progress https://github.com/SharePointOscar/ZSPharmaLiteratureApp.git +refs/heads/*:refs/remotes/origin/*
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision 932be2def07636e72026a1d3bc0974ea7ea9888a (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f 932be2def07636e72026a1d3bc0974ea7ea9888a
 > git rev-list 328d1a6d0c1ce71062606e245f8b3b53ab591a67 # timeout=10
[LiteratureNodeJSApp] $ /bin/sh -xe /tmp/hudson1904093255850306280.sh
+ echo /usr/lib/jvm/java-8-openjdk-amd64/bin:/var/jenkins_home/tools/jenkins.plugins.nodejs.tools.NodeJSInstallation/NodeJS_7.7.4/bin:/usr/lib/jvm/java-8-openjdk-amd64/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
/usr/lib/jvm/java-8-openjdk-amd64/bin:/var/jenkins_home/tools/jenkins.plugins.nodejs.tools.NodeJSInstallation/NodeJS_7.7.4/bin:/usr/lib/jvm/java-8-openjdk-amd64/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+ node --version
v7.7.4
+ grunt --version
grunt-cli v1.2.0
grunt v0.4.2
+ echo /var/jenkins_home/workspace/LiteratureNodeJSApp
/var/jenkins_home/workspace/LiteratureNodeJSApp
+ npm cache clear
+ npm install
zspharmaliteratureapp@0.2.1 /var/jenkins_home/workspace/LiteratureNodeJSApp
â””â”€â”€ bcrypt-nodejs@0.0.3 

npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.0.0 (node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.1.1: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
[LiteratureNodeJSApp] $ /bin/sh -xe /tmp/hudson8983408239347750396.sh
+ grunt mochaTest:unit
[4mRunning "mochaTest:unit" (mochaTest) task[24m


[36mverbose: [39mSetting Node environment...
[36mverbose: [39mIn this Sails app, detected special code languages: 0 []
[36mverbose: [39mmoduleloader hook loaded successfully.
[36mverbose: [39mLoading app config...
[36mverbose: [39muserconfig hook loaded successfully.
[36mverbose: [39mExposing global variables... (you can customize/disable this by modifying the properties in `sails.config.globals`.  Set it to `false` to disable all globals.)
[36mverbose: [39mLoading user hooks...
  1) "before all" hook
[36mverbose: [39mFound hook: `orm` in `node_modules/`.  Overriding core hook w/ the same identity...
[36mverbose: [39mFound hook: `sockets` in `node_modules/`.  Overriding core hook w/ the same identity...
[36mverbose: [39muserhooks hook loaded successfully.
[36mverbose: [39mLowering sails...
[36mverbose: [39mShutting down socket server...
[36mverbose: [39mError occurred closing socket server:  TypeError: Cannot read property 'httpServer' of undefined
    at shutdownSockets (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/lib/app/lower.js:94:19)
    at /var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:713:13
    at iterate (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:262:13)
    at async.forEachOfSeries.async.eachOfSeries (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:281:9)
    at _parallel (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:712:9)
    at Object.async.series (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:734:9)
    at /var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/lib/app/lower.js:73:11
    at beforeShutdown (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/lib/app/lower.js:45:12)
    at Sails.lower (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/lib/app/lower.js:49:3)
    at Sails.wrapper [as lower] (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/@sailshq/lodash/lib/index.js:3250:19)
    at Context.<anonymous> (/var/jenkins_home/workspace/LiteratureNodeJSApp/tests/unit/controllers/home.unit.js:37:11)
    at Hook.Runnable.run (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/grunt-mocha-test/node_modules/mocha/lib/runnable.js:196:15)
    at next (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/grunt-mocha-test/node_modules/mocha/lib/runner.js:258:10)
    at Immediate.<anonymous> (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/grunt-mocha-test/node_modules/mocha/lib/runner.js:275:5)
    at runCallback (timers.js:666:20)
    at tryOnImmediate (timers.js:639:5)
    at processImmediate [as _immediateCallback] (timers.js:611:5)
[34mdebug: [39mDeprecation warning: Support for `sails.config.sockets.onConnect` will be removed in an upcoming release. See the v0.11 migration guide for more information and alternate options.
[34mdebug: [39mDeprecation warning: `sails.config.sockets.onDisconnect` is now `sails.config.sockets.afterDisconnect`
Setting it for you this time, but note that the new `afterDisconnect` now receives an additional final argument (a callback).
More info: http://sailsjs.org/#!/documentation/reference/sails.config/sails.config.sockets.html
[34mdebug: [39mDeprecation warning: `sails.config.sockets.authorization` is now `sails.config.sockets.beforeConnect` (setting it for you this time)
[34mdebug: [39mDeprecation warning: `sails.config.sockets.beforeConnect` does not allow the `true` setting anymore (setting it to `undefined` for you this time)
[36mverbose: [39mLoading runtime custom response definitions...
[36mverbose: [39mLoading app services...
[36mverbose: [39mShutting down HTTP server...
[36mverbose: [39mError occurred closing HTTP server:  TypeError: Cannot read property 'unref' of undefined
    at shutdownHTTP (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/lib/app/lower.js:122:34)
    at /var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:713:13
    at Immediate.iterate (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:262:13)
    at runCallback (timers.js:666:20)
    at tryOnImmediate (timers.js:639:5)
    at processImmediate [as _immediateCallback] (timers.js:611:5)
[36mverbose: [39mlogger hook loaded successfully.
[36mverbose: [39mrequest hook loaded successfully.
[36mverbose: [39mLoading the app's models and any custom adapters...
[36mverbose: [39mLoading app models...
[36mverbose: [39mLoading app adapters...
[36mverbose: [39mOverriding ejs engine config with ejslocals to implement layout support...
[36mverbose: [39mviews hook loaded successfully.
[36mverbose: [39mLoading blueprint middleware...
[36mverbose: [39mblueprints hook loaded successfully.
[36mverbose: [39mresponses hook loaded successfully.
[31merror: [39mA hook (`controllers`) failed to load!
[36mverbose: [39mLowering sails...
[36mverbose: [39mShutting down socket server...
[36mverbose: [39mError occurred closing socket server:  TypeError: Cannot read property 'httpServer' of undefined
    at shutdownSockets (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/lib/app/lower.js:94:19)
    at /var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:713:13
    at iterate (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:262:13)
    at async.forEachOfSeries.async.eachOfSeries (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:281:9)
    at _parallel (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:712:9)
    at Object.async.series (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:734:9)
    at /var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/lib/app/lower.js:73:11
    at beforeShutdown (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/lib/app/lower.js:45:12)
    at Sails.lower (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/lib/app/lower.js:49:3)
    at Sails.wrapper [as lower] (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/@sailshq/lodash/lib/index.js:3250:19)
    at sailsReady (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/lib/app/lift.js:41:20)
    at /var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:721:13
    at /var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:52:16
    at /var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:264:21
    at /var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:44:16
    at /var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:718:17
    at /var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:167:37
    at /var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/lib/app/load.js:173:22
    at /var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:52:16
    at /var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:565:21
    at /var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/node_modules/async/lib/async.js:167:37
    at /var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/sails/lib/app/load.js:120:23
[36mverbose: [39mLoading policy modules from app...
[36mverbose: [39mFinished loading policy middleware logic.
[36mverbose: [39mpolicies hook loaded successfully.
[36mverbose: [39mservices hook loaded successfully.
[36mverbose: [39mcsrf hook loaded successfully.
[36mverbose: [39mcors hook loaded successfully.
[36mverbose: [39mi18n hook loaded successfully.
[36mverbose: [39msession hook loaded successfully.
[36mverbose: [39mLoading app Gruntfile...
[36mverbose: [39mTracking new grunt child process...
[36mverbose: [39mgrunt hook loaded successfully.
[36mverbose: [39mSetting default Express view engine to ejs...
[36mverbose: [39mhttp hook loaded successfully.
[36mverbose: [39mPreparing socket.io...
[36mverbose: [39msockets hook loaded successfully.
[36mverbose: [39mdotenv hook loaded successfully.
  2) "after all" hook

  0 passing (18s)
  2 failing

  1)  "before all" hook:
     Error: timeout of 5000ms exceeded
      at Timeout.<anonymous> (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/grunt-mocha-test/node_modules/mocha/lib/runnable.js:139:19)
      at ontimeout (timers.js:380:14)
      at tryOnTimeout (timers.js:244:5)
      at Timer.listOnTimeout (timers.js:214:5)

  2)  "after all" hook:
     Error: timeout of 2000ms exceeded
      at Timeout.<anonymous> (/var/jenkins_home/workspace/LiteratureNodeJSApp/node_modules/grunt-mocha-test/node_modules/mocha/lib/runnable.js:139:19)
      at ontimeout (timers.js:380:14)
      at tryOnTimeout (timers.js:244:5)
      at Timer.listOnTimeout (timers.js:214:5)



[33mWarning: Task "mochaTest:unit" failed. Use --force to continue.[39m

[31mAborted due to warnings.[39m
Build step 'Execute shell' marked build as failure
Finished: FAILURE
